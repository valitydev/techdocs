# Реализация. Работа с платежами

## Общий подход

Работа с платежами является основной задачей HellGate. Он должен обеспечивать как высокую скорость работы, 
так и надежность выполнения. Стандартный подход к проведению платежа выглядит следующим образом:
1. Инициируется платеж. Он может быть начат как на checkout странице разработанной vality.dev, так и через API 
(API прописано в [swag-payments](https://github.com/valitydev/swag-payments))
2. После этого платеж в зависимости от необходимости работы с карточными данными попадает либо в 
[CAPI](https://github.com/valitydev/capi-v2), либо в [CAPI-PCIDSS](https://github.com/valitydev/capi-pcidss-v2)). 
Сервис выполняет роль едтиной точки входа через API (маппит данные и использует определенный исполнитель). 
В случае платежа с использованием [интерфейса, описанного в damsel](), CAPI вызывает HellGate и платеж начинает 
обрабатываться.
3. Hellgate обогащает входные данные дополнительной информацией, проводит проверки и обрабатывает платеж. 
4. Страница, инициирующая платеж, получает данные о статусе платежа

Краткая иллюстрация алгоритма проведения платежа представлена на рисунке ниже
![](images/abstract-payment-flow.png)

Самым важным в данной схеме является этап обработки в HG, который далее и будет рассмотрен.


## Обработка платежа в HG
